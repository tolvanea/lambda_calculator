<!doctype html>
<html lang="en-US">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Lambda calculator</title>
        <style>
            body {
                display: flex;
                height: 98vh; /* Full height of the viewport */
                width: 99vw; /* Full height of the viewport */
                margin: 0; /* Remove default margin */
            }

            #main-container {
                display: flex;
                padding: 20px; /* Add padding */
                /*flex: 0 0 68%; /* Left side: 60% width */
                flex-direction: column;
                width: 68vw;
            }

            #right-side-panel {
                /*display: flex;*/
                padding: 20px; /* Add padding */
                /*flex: 0 0 28%; /* Rigth side: 30% width */
                width: 28vw;
                flex-direction: column;
                background-color: #f0f0f0; /* Light background color for documentation */
            }

            #doc-container {
                flex: 1; /* Occupy the top half */
                display: flex; /* Use flexbox for layout */
                flex-direction: column; /* Stack children vertically */
                /*flex: 0 0 28%; /* Right side: 40% width */
                padding: 20px; /* Add padding */
                /*background: color url('images/ponka.png') others;*/
                overflow-y: auto; /* Enable vertical scrolling if needed */
                height: 63vh;
                justify-content: flex-start; /* Align content to the top */
                /*justify-content: center;*/
                /*align-items: center;*/
                border: 3px solid #ccc; /* Add a border */
            }

            .image-wrapper {
                flex: 1; /* Occupy the top half */
                display: flex; /* Use flexbox for centering */
                justify-content: center; /* Center the image horizontally */
                width: 100%; /* Full width of the container */
                margin-top: auto; /* Push the image to the bottom of the container */
                height: 30vh;
            }

            #input-container {
                display: flex;
                flex-direction: column;
                justify-content: center; /* Center content vertically */
                align-items: center;
                padding: 20px; /* Add padding */
                height: 50vh;
            }

            #how-the-fuck-i-center-a-div {
                display: flex;
                align-items: center;
                justify-content: center
            }

            #output-container {
                display: flex;
                flex-direction: column;
                justify-content: flex-start; /* Align content to the top */
                padding: 20px; /* Add padding */
                height: 40vh;
                overflow-y: auto;
                overflow-x: auto;
            }

            /* Style for the output area */
            #output {
                font-family: monospace; /* Set to monospace font */
                white-space: pre; /* Preserve whitespace */
                border: 1px solid #ccc; /* Add a border */
                padding: 20px; /* Add some padding */
                background-color: #f9f9f9; /* Light background color */
                height: 100%;
                overflow-y: auto; /* Enable vertical scrolling if needed */
            }

            #input {
                flex: 0; /* Allow the textarea to grow */
                height: 100%;
                width: 100%; /* Full width */
                resize: none; /* Prevent resizing */
                padding: 20px; /* Add padding */
                border: 1px solid #ccc; /* Add a border */
                border-radius: 4px; /* Rounded corners */
            }

            #compile {
                margin: 20px 0; /* Add margin around the button */
                width: 50%;
                height: 50px;
                font-size: 25px;
                border-radius: 6px;
                background-color: #70abff;
                color: white;
                cursor: pointer;
            }

            #doc-image {
                max-height: 100%; /* Scale the image to fit within the container's height */
                max-width: 100%; /* Ensure the image does not exceed the container's width */
                height: auto; /* Maintain aspect ratio */
                width: auto; /* Maintain aspect ratio */
                opacity: 0.5; /* Set transparency to 50% */
                margin-top: auto; /* Push the image to the bottom of the container */
            }

            code {
                /*background-color: #d4d4d4; /* Light gray background for the code block */
                color: #003344; /* Darker text color for the code */
                font-family: 'Courier New', Courier, monospace; /* Monospace font for code */
            }

            .bold {
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <div id="main-container">
            <h1>Lambda calculator</h1>
            <div id="input-container">
                <textarea id="input" placeholder="Type the lambda expression here" rows="5" style="flex: 1; width: 100%;"></textarea>
            </div>
            <div id="how-the-fuck-i-center-a-div">
              <button id="compile">go brrrrrrrrr</button>
            </div>
            <div id="output-container">
                <div id="output" aria-label="Output will appear here..."></div>
            </div>
        </div>
        <div id="right-side-panel">
            <div id="doc-container">
                <h1>What is this?</h1><p>
                Untyped lambda calculus evaluation tool. It happens to be also a turing complete programming language.
                <h2>Umm, what?</h2><p>
                For example, this is a lambda function that takes two arguments <code>a</code> and <code>b</code>, and returns the first argument <code>a</code>
                <pre><code>λab.a</code></pre>
                it can be called with two parameters with parenthesis like so:
                <pre><code>(λab.a parameter1 parameter2)</code></pre>
                this evaluates to
                <pre><code>parameter1</code></pre>
                You can assign names to functions and expressions. This is a valid full program you can copy paste it to the left
                <pre><code>parameter1 = λc.c
parameter2 = λd.d
in
(λab.a parameter1 parameter2)</code></pre>
                which should evaluate to
                <pre><code>λc.c</code></pre>

                <h2>Ok, and?</h2><p>
                That's it! There is nothing more! No classes, no structs, no numbers, no booleans. Only pure lambda functions. The task here is to build everything on top of lambda functions. For example booleans can be encoded like so:
                <pre><code>true = λab.a
false = λab.b
and = λxy.(x y false)
in
(and true false)</code></pre>
                Try copy-pasting it to the left, it evaluates to
                <pre><code>λa.λb.b</code></pre>
                <h4>Wait why <code>λa.λb.b</code> instead of <code>λab.b</code>?</h4><p>
                That is the same thing, it is just internal way to represent multiparameter functions. A two parameter function <code>λab</code> is the same as a single parameter function <code>λa</code> that returns a single parameter function <code>λb</code>. If you feed it two parameters, it the outcome is the same

                <h2>Why</h2><p>
                I saw this video and was fascinated
                <a href="https://www.youtube.com/watch?v=RcVA8Nj6HEo">https://www.youtube.com/watch?v=RcVA8Nj6HEo</a>

                <p>TODO writing more docs is the boring part.</p>

            </div>
            <div class="image-wrapper"> <!-- New wrapper for the image -->
                <img src="images/twi.png" alt="structure and interpretation of computer programs" id="doc-image">
            </div>
        </div>


        <script type="module">
            import init, { process_input } from './pkg/lamlang.js';

            async function run() {
                await init();
                document.getElementById('compile').onclick = () => {
                    const input = document.getElementById('input').value;
                    const output = process_input(input);
                    document.getElementById('output').textContent = output;
                };
            }
            run();
        </script>
    </body>
</html>
